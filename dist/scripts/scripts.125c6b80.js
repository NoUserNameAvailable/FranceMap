"use strict";angular.module("testmapApp",["ngAnimate","nemLogging","ui-leaflet","ui.bootstrap","angularModalService"]),angular.module("testmapApp").controller("MainCtrl",["$scope","nemSimpleLogger","ModalService","$http","leafletData",function(a,b,c,d,e){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.hello="hello",b.log("hi"),a.categories=[{nom:"Musée scientifique en France",checked:!1},{nom:"http://fr.dbpedia.org/resource/Catégorie:Musée_scientifique_en_France",checked:!1}],a.change=function(){var b=[],c=[];angular.forEach(a.categories,function(d,e){d.checked===!0&&(b.push(d),angular.forEach(a.listeBrute,function(a,b){-1!==a.categories.indexOf(d.nom)&&c.push(a)}))}),e.getDirectiveControls().then(function(b){var d=f(c);b.markers.create(d,a.markers),a.markers=d}),console.log(a.markers)},angular.extend(a,{center:{lat:48.853,lng:2.35,zoom:13},watchOptions:{markers:{type:null,individual:{type:null}}},events:{map:{enable:["moveend","popupopen"],logic:"emit"},marker:{enable:[],logic:"emit"}},layers:{baselayers:{osm:{name:"OpenStreetMap",type:"xyz",url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}},overlays:{realworld:{name:"Real world data",type:"markercluster",visible:!0}}}});var f=function(a){return a.map(function(a){return{message:"<div ng-include src=\"'views/templates/markerpopup.html'\"></div>",lat:a.lat,lng:a.lng,ressource:a.url}})},g=function(a){return a.results.bindings.map(function(a){var b=a.categories.value.split(",");return{url:a.donnee.value,lat:parseFloat(a.lat.value),lng:parseFloat(a["long"].value),categories:b}})},h="http://fr.dbpedia.org/sparql?default-graph-uri=&query=select+%3Fdonnee+%3Flat+%3Flong+%28concat%28group_concat%28%3FcategorieNom%3Bseparator%3D%22%2C%22%29%29as+%3Fcategories%29++%0D%0Awhere+%7B%0D%0A%7B%3Fdonnee+%3Chttp%3A%2F%2Ffr.dbpedia.org%2Fproperty%2Fville%3E+%22Paris%22%40fr%7D+UNION+%7B%3Fdonnee+%3Chttp%3A%2F%2Ffr.dbpedia.org%2Fproperty%2Fville%3E+%3Chttp%3A%2F%2Ffr.dbpedia.org%2Fresource%2FParis%3E%7D%0D%0A%7B%3Fdonnee+rdf%3Atype+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2FMuseum%3E%7D+UNION+%7B%3Fdonnee+rdf%3Atype+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2FArchitecturalStructure%3E%7D%0D%0A%7B%3Fdonnee+rdf%3Atype+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2FMuseum%3E%7D+UNION+%7B%3Fdonnee+rdf%3Atype+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2FArchitecturalStructure%3E%7D%0D%0A%3Fdonnee+%3Chttp%3A%2F%2Fwww.w3.org%2F2003%2F01%2Fgeo%2Fwgs84_pos%23lat%3E+%3Flat.%0D%0A%3Fdonnee+%3Chttp%3A%2F%2Fwww.w3.org%2F2003%2F01%2Fgeo%2Fwgs84_pos%23long%3E+%3Flong.%0D%0A%3Fdonnee+%3Chttp%3A%2F%2Fpurl.org%2Fdc%2Fterms%2Fsubject%3E+%3Fcategorie.%0D%0A%3Fcategorie+rdfs%3Alabel+%3FcategorieNom.%0D%0AFILTER+NOT+EXISTS+%7B+%3Fdonnee+rdf%3Atype+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2FReligiousBuilding%3E+%7D%0D%0A%7Dgroup+by+%3Fdonnee+%3Flat+%3Flong+&format=application%2Fsparql-results%2Bjson&timeout=0&debug=on";d.get(h).then(function(b){a.listeBrute=g(b.data),e.getDirectiveControls().then(function(b){var c=f(a.listeBrute);b.markers.create(c,a.markers),a.markers=c})}),a.$on("leafletDirectiveMarker.click",function(a,b){console.log(b)}),a.modalCarte=function(b){console.log(a.cartes[b]),c.showModal({templateUrl:"views/modal/carte.html",controller:"ComplexController",inputs:{title:"A More Complex Example",carte:a.cartes[b]}}).then(function(b){b.element.modal(),b.close.then(function(b){a.complexResult="Name: "+b.name+", age: "+b.age})})}}]).controller("ComplexController",["$scope","$element","title","carte","close",function(a,b,c,d,e){a.name=null,a.age=null,a.title=c,a.carte=d,console.log(a.carte),a.close=function(){e({name:a.name,age:a.age},500)},a.cancel=function(){b.modal("hide"),e({name:a.name,age:a.age},500)}}]),angular.module("testmapApp").controller("MarkerpopupCtrl",["$scope",function(a){a.hello="brj",console.log("lol")}]),angular.module("testmapApp").run(["$templateCache",function(a){a.put("views/main.html",'<div ng-controller="MainCtrl as $ctrl"> <!--&lt;!&ndash;<p><a href class="btn btn-default btn-lg " ng-click="modalCarte(0)">Show Complex</a></p>&ndash;&gt;--> <!--&lt;!&ndash;<p>{{complexResult}}</p>&ndash;&gt;--> <!--&lt;!&ndash;<div class="container fill">&ndash;&gt;--> <!--&lt;!&ndash;<leaflet id="map" events="events" geojson="geojson"></leaflet>&ndash;&gt;--> <!--&lt;!&ndash;</div>&ndash;&gt;--> <!--&lt;!&ndash;<button type="button" class="btn btn-default" ng-click="$ctrl.open(1)">Modifier</button>&ndash;&gt;--> <nav class="navbar navbar-inverse"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#">Dégote Ta Gallerie (DTG)</a> </div> <div class="collapse navbar-collapse" id="myNavbar"> <ul class="nav navbar-nav"> <li class="active"><a href="#">Home</a></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">Catégorie<span class="caret"></span></a> <ul class="dropdown-menu"> <li ng-repeat="item in categories"> <div class="checkbox"> <label><input type="checkbox" ng-model="item.checked" ng-click="change()">{{item.nom}}</label> </div> </li> </ul> </li> <li><a href="#">Page 2</a></li> <li><a href="#">Page 3</a></li> </ul> <ul class="nav navbar-nav navbar-right"> <li><a href="#"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li> <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li> </ul> </div> </div> </nav> <div class="mapContainer"> <leaflet lf-center="center" markers="markers" layers="layers" event-broadcast="events" watch-options="watchOptions" width="100%" height="100%"> </leaflet></div> </div>'),a.put("views/modal/carte.html",'<div class="modal fade"> <div class="modal-dialog modal-lg"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" ng-click="close()" data-dismiss="modal" aria-hidden="true">&times;</button> <h4 class="modal-title">{{title}}</h4> </div> <div class="modal-body"> <p>Here\'s a more complex modal, it contains a form, data is passed to the controller and data is returned from the modal.</p> <form class="form-horizontal" role="form"> <div class="form-group"> <label for="name" class="col-sm-2 control-label">Name</label> <div class="col-sm-10"> <input type="text" class="form-control" id="name" placeholder="Your Name" ng-model="name"> </div> </div> <div class="form-group"> <label for="age" class="col-sm-2 control-label">Age</label> <div class="col-sm-10"> <input type="number" class="form-control" id="inputPassword3" placeholder="Age" ng-model="age"> </div> </div> </form> {{carte}} </div> <div class="modal-footer"> <button type="button" ng-click="close()" class="btn btn-primary" data-dismiss="modal">OK</button> <button type="button" ng-click="cancel()" class="btn">Cancel</button> </div> </div> </div> </div>'),a.put("views/templates/markerpopup.html",'<div ng-controller="MarkerpopupCtrl"> {{hello}} </div>')}]);